# mainwidget.kv
#:include src/kv/partials/mainlayout.kv


<MainWidget>:
    # The Id's for the widgets modified during runtime
    options_btn: options_btn  # Buttons
    start_btn: start_btn      #
    finish_btn: finish_btn    #
    cancel_btn: cancel_btn    #
    clock: clock  # Clock text
    no_assigned_break_text: no_assigned_break_text  # Break text
    pause_text: pause_text                          #
    bucket_1: bucket_1  # Bucket names
    bucket_2: bucket_2  #
    bucket_3: bucket_3  #
    bucket_4: bucket_4  #
    bucket_5: bucket_5  #
    time_1: time_1      # Bucket times
    time_2: time_2      #
    time_3: time_3      #
    time_4: time_4      #
    time_5: time_5      #
    time_avg: time_avg  #
    bkt_curr_name: bkt_curr_name  # Current bucket name and times
    bkt_curr_time: bkt_curr_time  #
    bkt_goal_time: bkt_goal_time  # Goal time

    MainLayout:
        # Date and time
        Label:
            id: clock
            pos_hint: {'x': 0.65, 'y': 0.05}
            size_hint: 0.2, 0.2
            text: 'hh:mm am    mm/dd/yyyy'
            bold: 1
            font_size: 28
            color: 0, 0, 0, 1

        # No assigned break text
        Label:
            id: no_assigned_break_text
            pos_hint: {'x': 0.15, 'y': 0.45}
            size_hint: 0.2, 0.2
            text: 'WARNING: NO ASSIGNED BREAK'
            bold: 1
            font_size: 24
            color: 1, 0, 0, 1

        # Break time text
        Label:
            id: pause_text
            pos_hint: {'x': 0.15, 'y': 0.45}
            size_hint: 0.2, 0.2
            text: 'TRACKER PAUSED FOR BREAK'
            bold: 1
            font_size: 24
            color: 1, 0, 0, 1

        # The grid layout for the bucket time table
        GridLayout:
            rows: 2
            cols: 2
            pos_hint: {'x': 0.05, 'y': 0.6}
            size_hint: 0.4, 0.2
            spacing: 3, 0

            # Label for the current bucket's name
            Label:
                id: bkt_curr_name
                text: 'CURRENT ()'
                bold: 1
                font_size: 18
                color: 1, 1, 1, 1
                canvas.before:
                    Color:
                        rgba: 0.357, 0.608, 0.835, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size

            # Label for the goal column
            Label:
                text: 'GOAL'
                bold: 1
                font_size: 18
                color: 1, 1, 1, 1
                canvas.before:
                    Color:
                        rgba: 0.357, 0.608, 0.835, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size

            # Label for the current bucket's time
            Label:
                id: bkt_curr_time
                text: '0.00 Hrs'
                bold: 1
                font_size: 18
                color: 0, 0, 0, 1
                canvas.before:
                    Color:
                        rgba: 0.815, 0.871, 0.937, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size

            # Label for the goal time
            Label:
                id: bkt_goal_time
                text: '0.00 Hrs'
                bold: 1
                font_size: 18
                color: 0, 0, 0, 1
                canvas.before:
                    Color:
                        rgba: 0.815, 0.871, 0.937, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size

        Image:
            source: 'img/logo.png'
            pos_hint: {'x': 0.05, 'y': 0.75}
            size_hint: 0.3, 0.3

        Label:
            pos_hint: {'x': 0.65, 'y': 0.775}
            size_hint: 0.2, 0.2
            text: 'BACKSHOP\'S BUCKET TIME TRACKER'
            bold: 1
            font_size: 18
            color: 0, 0, 0, 1

        # New bucket button
        MainWidgetBtn:
            id: options_btn
            pos_hint: {'x': 0.075, 'y': 0.12}
            text: 'OPTIONS'

        # New bucket button
        MainWidgetBtn:
            id: start_btn
            pos_hint: {'x': 0.075, 'y': 0.35}
            text: 'NEW BUCKET'

        # Finish bucket button
        MainWidgetBtn:
            id: finish_btn
            pos_hint: {'x': 0.275, 'y': 0.35}
            text: 'FINISH BUCKET'

        # Cancel bucket button
        MainWidgetBtn:
            id: cancel_btn
            pos_hint: {'x': 0.275, 'y': 0.12}
            text: 'CANCEL BUCKET'

        GridLayout:
            rows: 7
            cols: 2
            pos_hint: {'x': 0.55, 'y': 0.3}
            size_hint: 0.4, 0.5
            spacing: 3, 0

            Label:
                text: 'BUCKET NUMBER'
                bold: 1
                font_size: 18
                color: 1, 1, 1, 1
                canvas.before:
                    Color:
                        rgba: 0.357, 0.608, 0.835, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size

            Label:
                text: 'ACTUAL TIME'
                bold: 1
                font_size: 18
                color: 1, 1, 1, 1
                canvas.before:
                    Color:
                        rgba: 0.357, 0.608, 0.835, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size

            MainWidgetBktTableText1:
                id: bucket_5
                text: ''

            MainWidgetBktTableText1:
                id: time_5
                text: '0.00 Hrs'

            MainWidgetBktTableText2:
                id: bucket_4
                text: ''

            MainWidgetBktTableText2:
                id: time_4
                text: '0.00 Hrs'

            MainWidgetBktTableText1:
                id: bucket_3
                text: ''

            MainWidgetBktTableText1:
                id: time_3
                text: '0.00 Hrs'

            MainWidgetBktTableText2:
                id: bucket_2
                text: ''

            MainWidgetBktTableText2:
                id: time_2
                text: '0.00 Hrs'

            MainWidgetBktTableText1:
                id: bucket_1
                text: ''

            MainWidgetBktTableText1:
                id: time_1
                text: '0.00 Hrs'

            MainWidgetBktTableText2:
                text: 'AVERAGE'

            MainWidgetBktTableText2:
                id: time_avg
                text: '0.00 Hrs'


<MainWidgetBtn@Button>:
    size_hint: 0.15, 0.15
    bold: 1
    font_size: 14
    background_normal: ''  # Removes the gray tint
    background_color: 0.357, 0.608, 0.835, 1


<MainWidgetBktTableText1@Label>:
    bold: 1
    font_size: 18
    color: 0, 0, 0, 1
    canvas.before:
        Color:
            rgba: 0.815, 0.871, 0.937, 1
        Rectangle:
            pos: self.pos
            size: self.size


<MainWidgetBktTableText2@Label>:
    bold: 1
    font_size: 18
    color: 0, 0, 0, 1
    canvas.before:
        Color:
            rgba: 0.914, 0.937, 0.968, 1
        Rectangle:
            pos: self.pos
            size: self.size
